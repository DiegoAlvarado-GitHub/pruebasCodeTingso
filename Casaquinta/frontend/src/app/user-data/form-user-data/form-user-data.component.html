<div class="cardTitle">
</div>

<div class="Contenido">
    <form [formGroup]="formUsuario">
        <div class="idUser">
            <b>Rut:</b>
            <span class="separacion"></span>
            <button mat-flat-button color="warn">{{this.formUsuario.value.rut}}</button>
            <span class="separacion"></span>
            <b>Tipo de Usuario:</b>
            <span class="separacion"></span>
            <button mat-flat-button color="warn">{{this.formUsuario.value.rol}}</button>
            
            <!-- <b  formControlName= "rut" value="rut.value"></b>
            <mat-card formControlName= "rut" value="rut.value">Simple card</mat-card> -->

            <!-- <mat-form-field appearance="fill">
                <mat-label>Rut</mat-label>
                <input matInput formControlName= "rut" type="number" required value="rut.value" readonly=»readonly»>
            </mat-form-field> -->
            
        </div>
        <div  *ngIf ="loadingUsuario; else cargando" >

            <div>
                <mat-form-field appearance="fill">
                    <mat-label>Nombre</mat-label>
                    <input matInput formControlName= "nombre" required>
                </mat-form-field>
    
                <mat-form-field appearance="fill">
                    <mat-label>Apellidos</mat-label>
                    <input matInput formControlName= "apellidos" required>
                </mat-form-field>
            </div>
            
            <div>
                <mat-form-field appearance="fill">
                    <mat-label>Correo</mat-label>
                    <input matInput formControlName= "correo" required >
                </mat-form-field>
            </div>

            <!-- mostrar terapias -->
            <h4>Terapias</h4>
            <li *ngFor="let item of terapiasImpartidas; let i = index" [attr.data-index]="i">
                {{item.tipo_terapia}}
            </li>
            <!-- mostrar terapias que le faltan-->
            <h4>Terapias Faltantes</h4>

            <!-- <div *ngFor="let unit of terapiasFaltantes; let i=index">
                <mat-checkbox [(ngModel)]="terapiasFaltantes[i].checked"
                  id="units[{{i}}]" name="units[{{i}}]">
                     {{ unit.tipo_terapia }}
                </mat-checkbox>                        
            </div>     -->

            <div *ngFor="let data of terapiasFaltantes; index as j">
                <mat-checkbox [formControl] = "formTerapias.controls[j]">
                  {{data.tipo_terapia}}
                </mat-checkbox>
            </div>




            


            
     

            <div>
                <!-- <mat-form-field appearance="fill">
                    <mat-label>Contraseña actual</mat-label>
                    <input matInput formControlName= "contraseña" [type]="hide1 ? 'password' : 'text'">
                    <button mat-icon-button matSuffix (click)="hide1 = !hide1" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide1">
                    <mat-icon>{{hide1 ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </button>
                </mat-form-field> -->

                <mat-form-field appearance="fill">
                    <mat-label>Nueva contraseña</mat-label>
                    <input matInput formControlName= "nuevaContraseña1" [type]="hide2 ? 'password' : 'text'">
                    <button mat-icon-button matSuffix (click)="hide2 = !hide2" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide2">
                      <mat-icon>{{hide2 ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </button>
                </mat-form-field>

                <mat-form-field appearance="fill">
                    <mat-label>Repita nueva contraseña</mat-label>
                    <input matInput formControlName= "nuevaContraseña2" [type]="hide3 ? 'password' : 'text'">
                    <button mat-icon-button matSuffix (click)="hide3 = !hide3" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide3">
                      <mat-icon>{{hide3 ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </button>
                </mat-form-field>

                <button mat-raised-button (click)="cambiarPass()">Actualizar Contraseña</button>
            </div>
            


        </div>
        <ng-template #cargando>
            cargando
        </ng-template>
            
    </form>



    <!-- Terepias -> sera un checkbox
    <div *ngIf ="loadingTerapias; else cargando">
        <mat-label>Terapias</mat-label>
        <div  *ngFor="let terapia of terapias; index as i">
            <mat-checkbox [formControl] = "formTerapias.controls[i]">
                {{terapia.tipo_terapia}}
            </mat-checkbox>
        </div>    
    </div>

    <ng-template #cargando>
        cargando
    </ng-template> -->

    <button mat-raised-button (click)="onSubmit()">Actualizar Datos</button>
    
    
</div>